@model App_Ventas.Areas.Ventas.Models.VentasModelView

<script>
    $(document).ready(function () {

        $('#FLG_TIPO_VENTA').bootstrapToggle({
            on: 'Credito',
            off: 'Al Contado',
            size: "small",
            width: "100",
            height: "35",
            onstyle: "danger",
            style: "_toggle_css"
        });
        Ventas_Detalle_ConfigurarGrilla();
    });

    $('#Usuarios_btn_Guardar').click(function () {
        Preguntar();
    });

    $('#FCHA_DOCUMENTO').datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: "dd/mm/yy",
        firstDay: 1,
        changeFirstDay: false,
        showAnim: 'slideDown'
    });



</script>

<style>
    .modal-lg_ {
        max-width: 55%;
    }

    ._text_detalle {
        width: 45%;
        max-width: 45%;
        display: inline-block;
        text-align: right;
    }

    ._text_detalle_monto {
        width: 45%;
        max-width: 45% display: inline-block;
        text-align: left;
    }

    ._toggle_css > toggle-group > label {
        text-align: center;
    }

    .input-group-text {
        background: #f9fbfd;
        color: #000;
        border: 1px solid #c7c6c6;
    }
</style>


<div class="modal-dialog modal-lg_" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title"><i class="bi bi-pencil-square"></i>&nbsp; Registrar nueva venta </h5>
            <button type="button" class="close" data-dismiss="modal">
                <span>&times;</span>
            </button>
        </div>
        <div class="modal-body">
            @using (Html.BeginForm("Ventas", "Ventas", new { @area = "Ventas" }, FormMethod.Post, new { @id = "frmMantenimiento_Ventas" }))
            {
                       
                @Html.ValidationSummary(true) 
                <div class="form-row">
                    <div class="form-group col-md-6">
                        @Html.LabelFor(model => model.COD_VENTA)
                        @Html.TextBoxFor(model => model.COD_VENTA, new { @class = "form-control", @maxlength = "100"  ,@disabled = "true"})
                        @Html.ValidationMessageFor(model => model.COD_VENTA, string.Empty, new { @class = "cssMessageError animated  fadeInUp" })
                    </div>

                    <div class="form-group col-md-6">
                        @Html.LabelFor(model => model.ID_TIPO_COMPROBANTE)
                        @Html.DropDownListFor(model => model.ID_TIPO_COMPROBANTE, Model.Lista_Tipo_Comprobante, new { @class = "form-control", @maxlength = "150", @style = "width:100%" })
                        @Html.ValidationMessageFor(model => model.ID_TIPO_COMPROBANTE, string.Empty, new { @class = "cssMessageError animated  fadeInUp" })
                    </div>
                    <div class="form-group col-md-6">
                        @Html.LabelFor(model => model.COD_COMPROBANTE)
                        @Html.TextBoxFor(model => model.COD_COMPROBANTE, new { @class = "form-control", @maxlength = "100" })
                        @Html.ValidationMessageFor(model => model.COD_COMPROBANTE, string.Empty, new { @class = "cssMessageError animated  fadeInUp" })
                    </div>

                    <div class="form-group col-md-6">
                        @Html.LabelFor(model => model.ID_CLIENTE)
                        @Html.DropDownListFor(model => model.ID_CLIENTE, Model.Lista_Tipo_Comprobante, new { @class = "form-control", @maxlength = "150", @style = "width:100%" })
                        @Html.ValidationMessageFor(model => model.ID_CLIENTE, string.Empty, new { @class = "cssMessageError animated  fadeInUp" })
                    </div>


                </div>
                
                <br />
                <div class="form-row">
                    <h4 class="card-title border-bottom-head" style="width: 100%; height: 30px;"><i class="bi bi-list-check"></i>&nbsp; Lista de Productos:</h4>
                </div>
                <div class="form-row">
                    <div class=" col-md-12" style="display: flex; justify-content: flex-end; margin-bottom: 5px;">
                        <button type="button" class="btn btn-rounded btn-secondary btn-hover-shine">
                            <span class="btn-icon-left text-secondary"><i class="fa fa-plus color-secondary"></i>
                            </span>Agregar Producto</button>
                    </div>
                    <div class="form-group col-md-12">
                        <div class="jqGrid">
                            <table id="Ventas_Detalle_Grilla"></table>
                            <div id="Ventas_Detalle_Barra"></div>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <h4 class="card-title border-bottom-head" style="width: 100%; height: 30px;">Detalle Documento:</h4>
                </div>
                
                
                <div class="form-row">
                    <div class="col-xl-8 col-xxl-6 col-lg-6 col-md-12">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                @Html.LabelFor(model => model.DESCUENTO)
                                <div class="input-group mb-12">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">S/.</span>
                                    </div>
                                    @Html.TextBoxFor(model => model.DESCUENTO, new { @class = "form-control ignore", @maxlength = "200", @requiered = "false" })
                                </div>
                            </div>

                            <div class="form-group col-md-4">
                                @Html.LabelFor(model => model.TOTAL_RECIBIDO)
                                <div class="input-group mb-12">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">S/.</span>
                                    </div>
                                    @Html.TextBoxFor(model => model.TOTAL_RECIBIDO, new { @class = "form-control", @maxlength = "200" })
                                </div>
                            </div>

                            <div class="form-group col-md-4">
                                @Html.LabelFor(model => model.VUELTO)
                                <div class="input-group mb-12">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">S/.</span>
                                    </div>
                                    @Html.TextBoxFor(model => model.VUELTO, new { @class = "form-control", @maxlength = "200" })
                                </div>
                            </div>

                            <div class="form-group col-md-4">
                                @Html.LabelFor(model => model.FLG_TIPO_VENTA)
                                <div class=" col-md-4" style="padding-left: 0px !important;">
                                    @Html.CheckBoxFor(model => model.FLG_TIPO_VENTA, new { @class = "form-control", @maxlength = "100" })
                                    @Html.ValidationMessageFor(model => model.FLG_TIPO_VENTA, string.Empty, new { @class = "cssMessageError animated  fadeInUp" })
                                </div>
                            </div>

                            <div class="form-group col-md-8">
                                @Html.LabelFor(model => model.ADELANTO)
                                <div class="input-group mb-12">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">S/.</span>
                                    </div>
                                    @Html.TextBoxFor(model => model.ADELANTO, new { @class = "form-control", @maxlength = "200" })
                                </div>
                            </div>


                            <div class="form-group col-md-12">
                                @Html.LabelFor(model => model.DETALLE)
                                @Html.TextAreaFor(model => model.DETALLE, new { @class = "form-control", @maxlength = "200" })
                            </div>

                        </div>

                    </div>
                    <div class="col-xl-4 col-xxl-6 col-lg-6 col-md-12 ">
                        <div class="basic-list-group">
                            <ul class="list-group list-group-flush" style="color: #5a5a5a;">
                                <li class="list-group-item"><b>Resumen:</b></li>
                                <li class="list-group-item"><span class="_text_detalle">(-)Desciento Total:</span> <span class="_text_detalle_monto">0</span></li>
                                <li class="list-group-item"><span class="_text_detalle">Igv():</span> <span class="_text_detalle_monto">0</span> </li>
                                <li class="list-group-item" style="border-bottom: 1px solid #eaeaea;"><span class="_text_detalle">Total:</span> <span class="_text_detalle_monto">0</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
            }

        </div>
        <div class="modal-footer">
            <button type="button" id="Usuarios_btn_Guardar" class="btn btn-hover-shine btn-square btn-primary"><i class="bi bi-save2"></i>Guardar</button>
            <button type="button" class="btn  btn-square btn-dark" data-dismiss="modal">Cancelar</button>
        </div>
    </div>
</div>


@Html.Hidden("hfd_ID_VENTA", Model.ID_VENTA)
@Html.Hidden("AccionVentas", Model.Accion)